@using HDNHD.Core.Helpers;

<div class="main">
    <div class="main-inner">
        <div class="container">
            <div class="row">
                <div class="widget">
                    <div class="widget-header">
                        <i class="icon-th-list"></i>
                        <h3>Báo cáo doanh thu</h3>
                    </div>
                    <div class="widget-content">
                        @Html.Partial("_DoanhThuFilter", (object)ViewBag.Filter)
                        <div class="col-md-12">
                            <table class="table table-striped table-bordered data-table">
                                <thead>
                                    <tr>
                                        <th rowspan="2" width="12%"></th>
                                        <th rowspan="2">Dư nợ đầu kỳ</th>
                                        <th rowspan="2">Dư có đầu kỳ</th>
                                        <th rowspan="2">HĐ in trong tháng</th>
                                        <th rowspan="2">Doanh thu phải thu trong tháng</th>
                                        <th colspan="3">Doanh thu đã thu trong tháng</th>
                                        <th rowspan="2">Dư nợ cuối kỳ</th>
                                        <th rowspan="2">Dư có cuối kỳ</th>
                                    </tr>
                                    <tr>
                                        <th>Chuyển khoản</th>
                                        <th>Tiền mặt</th>
                                        <th>Tổng cộng</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Hộ GĐ</strong></td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuNoDauKyHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuCoDauKyHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienTrenHoaDonHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienPhaiThuHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienDaThuChuyenKhoanHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienDaThuTienMatHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienDaThuHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuNoCuoiKyHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuCoCuoiKyHoGD)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Cơ quan tổ chức</strong></td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuNoDauKy - ViewBag.DuNoDauKyHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuCoDauKy - ViewBag.DuCoDauKyHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienTrenHoaDon - ViewBag.SoTienTrenHoaDonHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienPhaiThu - ViewBag.SoTienPhaiThuHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienDaThuChuyenKhoan - ViewBag.SoTienDaThuChuyenKhoanHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienDaThuTienMat - ViewBag.SoTienDaThuTienMatHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienDaThu - ViewBag.SoTienDaThuHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuNoCuoiKy - ViewBag.DuNoCuoiKyHoGD)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuCoCuoiKy - ViewBag.DuCoCuoiKyHoGD)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Tổng cộng</strong></td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuNoDauKy)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuCoDauKy)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienTrenHoaDon)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.SoTienPhaiThu)</td>
                                        <td style="text-align: right;"><strong>@CurrencyHelpers.FormatVN(ViewBag.SoTienDaThuChuyenKhoan)</strong></td>
                                        <td style="text-align: right;"><strong>@CurrencyHelpers.FormatVN(ViewBag.SoTienDaThuTienMat)</strong></td>
                                        <td style="text-align: right;"><strong>@CurrencyHelpers.FormatVN(ViewBag.SoTienDaThu)</strong></td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuNoCuoiKy)</td>
                                        <td style="text-align: right;">@CurrencyHelpers.FormatVN(ViewBag.DuCoCuoiKy)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
        $(document).ready(function () {

            // onInit:
            loadQuanHuyen($(".sl-quan-huyen"), "@ViewBag.Filter.QuanHuyenID");

            // load data onChange
            $(".sl-quan-huyen").on("change", function () {
                // get selected quanHuyenID
                var quanHuyenID = $(this).val();

                // loadTo
                loadTo($(".sl-to"), quanHuyenID, "@ViewBag.Filter.ToID", true);
            });

            $(".sl-to").on("change", function () {
                // get selected toID
                var toID = $(this).val();

                // loadNhanVien
                loadNhanVien($(".sl-nhan-vien"), toID, "@ViewBag.Filter.NhanVienID");
            });

            $(".sl-nhan-vien").on("change", function () {
                // get selected nhanVien
                var nhanVienID = $(this).val();

                // loadTuyen
                loadTuyen($(".sl-tuyen-kh"), nhanVienID, "@ViewBag.Filter.TuyenKHID");
            });

        });
</script>
}